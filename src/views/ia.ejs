<!-- src/views/landing.ejs -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Horror History: IA</title>
    <link rel="icon" type="image/x-icon" href="/favicon.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Jolly+Lodger&display=swap");
      .texto {
        font-family: "Jolly Lodger", cursive;
        letter-spacing: 1px;
      }

      .image-background {
        background-image: url('/assets/fondo.png');
        background-position: center;
        background-size: cover;
      }

      .btn-blood {
        font-size: 20px;
        min-width: 120px;
        background-color: rgba(156, 0, 1, 0.8);
        color: white;
        font-weight: bold;
        padding: 5px 10px;
        border: none;
        border-radius: 10px;
        position: relative;
        overflow: hidden;
      }

      .btn-blood::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 0, 0, 0.5);
        transform: skewX(-30deg);
        transition: left 0.3s;
        z-index: -1;
      }

      .btn-blood:hover::before {
        left: 100%;
      }

      .form-input {
        min-width: 250px;
        max-width: 320px;
        background-color: rgba(150, 150, 150, 0.5);
        color: white;
        font-size: 20px;
        margin-bottom: 25px;
        margin-left: auto;
        margin-right: auto;
        display: grid;
        justify-content: center;
      }

      .form-label {
        font-size: 24px;
        text-align: center;
        color: whitesmoke;
        margin-bottom: 15px;
      }

      ::placeholder {
        /* Chrome, Firefox, Opera, Safari 10.1+ */
        color: #bbbbbb !important;
        opacity: 1; /* Firefox */
      }

      :-ms-input-placeholder {
        /* Internet Explorer 10-11 */
        color: #bbbbbb !important;
      }

      ::-ms-input-placeholder {
        /* Microsoft Edge */
        color: #bbbbbb !important;
      }

      .transitionable {
        transition: all ease 1s;
      }

      .ojo-gif {
        height: 150px;
        width: 150px;
        object-fit: contain;
        object-position: center;
        margin-left: auto;
        margin-right: auto;
        border-radius: 50%;
        margin-bottom: 20px;
      }

      .centered {
        margin-left: auto;
        margin-right: auto;
      }
    </style>
  </head>
  <body class="image-background">
    <div id="dismiss-div" class="flex flex-col items-center justify-center h-screen transitionable bg-black">
      <h1 class="text-4xl font-bold text-white texto">
        ¿Estas listo para descubrir tus mayores temores?
      </h1>
    </div>
    <div id="display-div" class="flex flex-col items-center justify-center h-screen transitionable" style="opacity: 0; display: none;">
      <form class="shadow-md rounded px-8 pt-6 pb-8 mb-4">
        <img src="/assets/ojo.gif" class="ojo-gif" />
        <!-- Miedo -->
        <div class="mb-4">
          <label
            class="block text-gray-700 text-sm font-bold mb-2 text-white texto form-label"
            for="miedo"
          >
            ¿Existe alguna fobia o temor que te paralice del miedo?
          </label>
          <input
            class="shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline texto form-input"
            id="miedo"
            type="text"
            placeholder="Ingresa tu respuesta"
          />
        </div>
        <!-- Ansiedad -->
        <div class="mb-4">
          <label
            class="block text-gray-700 text-sm font-bold mb-2 text-white texto form-label"
            for="ansiedad"
          >
            ¿Hay alguna situación o escenario que te cause una ansiedad imparable?
          </label>
          <input
            class="shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline texto form-input"
            id="ansiedad"
            type="text"
            placeholder="Ingresa tu respuesta"
          />
        </div>
        <!-- Objeto -->
        <div class="mb-4">
          <label
            class="block text-gray-700 text-sm font-bold mb-2 text-white texto form-label"
            for="objeto"
          >
            ¿Cuál es el objeto, animal o evento que más te aterra?
          </label>
          <input
            class="shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline texto form-input"
            id="objeto"
            type="text"
            placeholder="Ingresa tu respuesta"
          />
        </div>

        <div class="flex items-center justify-end centered">
          <button
            id="loginButton"
            class="btn-blood hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline centered texto"
            type="button"
            onclick="handleSubmit()"
          >
            Descubre tu historia
          </button>
        </div>
      </form>
    </div>

    <script>

      window.onload = (event) => {
        const dismiss = document.getElementById('dismiss-div');
        const display = document.getElementById('display-div');
        setTimeout(() => {
          dismiss.style.opacity = 0;
          setTimeout(() => {
            dismiss.style.display = 'none';
            display.style.display = 'flex';
            setTimeout(() => {
              display.style.opacity = 1;
            }, 200);
          }, 1000);
        }, 2000);
      }

      function handleSubmit() {
        const q1 = document.getElementById("question1").value;
        const q2 = document.getElementById("question2").value;
        const q3 = document.getElementById("question3").value;

        fetch("/chat/sendToChatGPT", {
          method: "POST",
          // Agrega las opciones de la solicitud, como el cuerpo con los datos de inicio de sesión
          body: JSON.stringify({
            q1: q1,
            q2: q2,
            q3: q3,
          }),
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then(function (response) {
            console.log(response);
          })
          .catch(function (error) {
            // Maneja los errores de la solicitud
            console.error(error);

            // Redirige a una página de inicio de sesión fallida o muestra un mensaje de error
            // ...
          });
      }

    </script>
  </body>
</html>
